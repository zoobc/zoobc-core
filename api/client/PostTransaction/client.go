package main

import (
	"context"
	"fmt"

	"github.com/sirupsen/logrus"
	log "github.com/sirupsen/logrus"
	"github.com/spf13/viper"
	rpc_model "github.com/zoobc/zoobc-core/common/model"
	rpc_service "github.com/zoobc/zoobc-core/common/service"
	"github.com/zoobc/zoobc-core/common/util"
	"google.golang.org/grpc"
)

func main() {
	var apiRPCPort int
	if err := util.LoadConfig("../../../resource", "config", "toml"); err != nil {
		logrus.Fatal(err)
	} else {
		apiRPCPort = viper.GetInt("apiRPCPort")
		if apiRPCPort == 0 {
			apiRPCPort = 8080
		}
	}

	conn, err := grpc.Dial(fmt.Sprintf(":%d", apiRPCPort), grpc.WithInsecure())
	if err != nil {
		log.Fatalf("did not connect: %s", err)
	}
	defer conn.Close()

	c := rpc_service.NewTransactionServiceClient(conn)

	response, err := c.PostTransaction(context.Background(), &rpc_model.PostTransactionRequest{
		// TransactionBytes: []byte{
		//	1, 0, 1, 82, 108, 58, 93, 0, 0, 0, 0, 0, 0, 66, 67, 90, 110, 83, 102, 113, 112, 80, 53, 116, 113, 70, 81, 108, 77, 84, 89,
		//	107, 68, 101, 66, 86, 70, 87, 110, 98, 121, 86, 75, 55, 118, 76, 114, 53, 79, 82, 70, 112, 84, 106, 103, 116, 78, 0, 0, 66,
		//	67, 90, 75, 76, 118, 103, 85, 89, 90, 49, 75, 75, 120, 45, 106, 116, 70, 57, 75, 111, 74, 115, 107, 106, 86, 80, 118, 66, 57,
		//	106, 112, 73, 106, 102, 122, 122, 73, 54, 122, 68, 87, 48, 74, 1, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 16, 39, 0, 0, 0, 0, 0, 0, 140,
		//	134, 217, 86, 232, 251, 81, 174, 86, 44, 221, 44, 226, 73, 245, 19, 170, 94, 47, 160, 53, 20, 225, 192, 19, 200, 196, 217, 96, 64,
		//	66, 6, 146, 16, 61, 104, 106, 112, 122, 96, 233, 224, 208, 119, 245, 148, 60, 9, 131, 211, 110, 68, 167, 115, 243, 251, 90, 64, 234,
		//	66, 108, 30, 116, 9,
		// },
		//Send money to new account
		// TransactionBytes: []byte{1, 0, 0, 0, 1, 169, 47, 140, 93, 0, 0, 0, 0, 44, 0, 0, 0, 66, 67, 90, 69, 71, 79, 98, 51, 87,
		// 	78, 120, 51, 102, 68, 79, 86, 102, 57, 90, 83, 52, 69, 106, 118, 79, 73, 118, 95, 85, 101, 87, 52, 84, 86, 66, 81,
		// 	74, 95, 54, 116, 72, 75, 108, 69, 44, 0, 0, 0, 86, 90, 118, 89, 100, 56, 48, 112, 53, 83, 45, 114, 120, 83, 78,
		// 	81, 109, 77, 90, 119, 89, 88, 67, 55, 76, 121, 65, 122, 66, 109, 99, 102, 99, 106, 52, 77, 85, 85, 65, 100, 117,
		// 	100, 87, 77, 1, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 242, 5, 42, 1, 0, 0, 0, 0, 0, 0, 0, 153, 180, 41, 36, 27, 96,
		// 	52, 152, 64, 57, 31, 251, 13, 185, 58, 229, 125, 248, 39, 31, 40, 243, 19, 204, 13, 0, 82, 170, 238, 147, 55, 213,
		// 	217, 238, 158, 121, 93, 149, 77, 123, 242, 47, 76, 92, 42, 127, 157, 105, 52, 6, 178, 158, 81, 135, 49, 125, 204,
		// 	36, 117, 162, 157, 125, 204, 5},
		//Registering a new node
		// TransactionBytes: []byte{2, 0, 0, 0, 1, 52, 121, 140, 93, 0, 0, 0, 0, 44, 0, 0, 0, 66, 67, 90, 69, 71, 79, 98,
		// 51, 87, 78, 120, 51, 102, 68, 79, 86, 102, 57, 90, 83, 52, 69, 106, 118, 79, 73, 118, 95, 85, 101, 87, 52, 84,
		// 86, 66, 81, 74, 95, 54, 116, 72, 75, 108, 69, 44, 0, 0, 0, 66, 67, 90, 69, 71, 79, 98, 51, 87, 78, 120, 51,
		// 102, 68, 79, 86, 102, 57, 90, 83, 52, 69, 106, 118, 79, 73, 118, 95, 85, 101, 87, 52, 84, 86, 66, 81, 74, 95,
		// 54, 116, 72, 75, 108, 69, 1, 0, 0, 0, 0, 0, 0, 0, 245, 0, 0, 0, 4, 38, 103, 73, 250, 169, 63, 155, 106, 21, 9,
		// 76, 77, 137, 3, 120, 21, 69, 90, 118, 242, 84, 174, 239, 46, 190, 78, 68, 90, 83, 142, 11, 44, 0, 0, 0, 86,
		// 90, 118, 89, 100, 56, 48, 112, 53, 83, 45, 114, 120, 83, 78, 81, 109, 77, 90, 119, 89, 88, 67, 55, 76, 121,
		// 65, 122, 66, 109, 99, 102, 99, 106, 52, 77, 85, 85, 65, 100, 117, 100, 87, 77, 9, 0, 0, 0, 49, 50, 55, 46,
		// 48, 46, 48, 46, 49, 0, 202, 154, 59, 0, 0, 0, 0, 86, 90, 118, 89, 100, 56, 48, 112, 53, 83, 45, 114, 120,
		// 83, 78, 81, 109, 77, 90, 119, 89, 88, 67, 55, 76, 121, 65, 122, 66, 109, 99, 102, 99, 106, 52, 77, 85, 85,
		// 65, 100, 117, 100, 87, 77, 209, 64, 140, 231, 150, 96, 104, 137, 202, 190, 83, 202, 22, 67, 222, 38, 48,
		// 40, 213, 202, 144, 30, 73, 184, 186, 188, 240, 209, 252, 222, 132, 36, 1, 0, 0, 0, 190, 213, 153, 23, 0, 52,
		// 241, 71, 115, 58, 91, 243, 47, 209, 163, 111, 41, 177, 7, 108, 103, 8, 138, 60, 244, 32, 240, 207, 2, 156,
		// 221, 164, 237, 104, 119, 76, 16, 51, 137, 150, 117, 246, 83, 228, 137, 125, 154, 255, 220, 98, 116, 187,
		// 118, 138, 141, 43, 53, 122, 182, 253, 235, 218, 94, 7, 0, 0, 0, 0, 173, 145, 17, 13, 8, 51, 28, 251, 200,
		// 27, 108, 48, 214, 191, 207, 64, 190, 78, 153, 82, 118, 165, 93, 144, 22, 237, 68, 85, 65, 4, 61, 96, 9,
		// 222, 129, 139, 182, 68, 112, 208, 25, 75, 188, 150, 112, 230, 56, 148, 103, 108, 96, 194, 195, 178, 170,
		// 108, 153, 176, 179, 187, 73, 175, 39, 13},
		//Update node registration
		// TransactionBytes: []byte{2, 1, 0, 0, 1, 60, 145, 140, 93, 0, 0, 0, 0, 44, 0, 0, 0, 66, 67, 90, 69, 71, 79,
		// 	98, 51, 87, 78, 120, 51, 102, 68, 79, 86, 102, 57, 90, 83, 52, 69, 106, 118, 79, 73, 118, 95, 85, 101,
		// 	87, 52, 84, 86, 66, 81, 74, 95, 54, 116, 72, 75, 108, 69, 44, 0, 0, 0, 66, 67, 90, 69, 71, 79, 98, 51,
		// 	87, 78, 120, 51, 102, 68, 79, 86, 102, 57, 90, 83, 52, 69, 106, 118, 79, 73, 118, 95, 85, 101, 87, 52,
		// 	84, 86, 66, 81, 74, 95, 54, 116, 72, 75, 108, 69, 1, 0, 0, 0, 0, 0, 0, 0, 197, 0, 0, 0, 153, 58, 50,
		// 	200, 7, 61, 108, 229, 204, 48, 199, 145, 21, 99, 125, 75, 49, 45, 118, 97, 219, 80, 242, 244, 100,
		// 	134, 144, 246, 37, 144, 213, 135, 9, 0, 0, 0, 49, 50, 55, 46, 48, 46, 48, 46, 49, 0, 20, 174, 242,
		// 	35, 9, 0, 0, 86, 90, 118, 89, 100, 56, 48, 112, 53, 83, 45, 114, 120, 83, 78, 81, 109, 77, 90, 119,
		// 	89, 88, 67, 55, 76, 121, 65, 122, 66, 109, 99, 102, 99, 106, 52, 77, 85, 85, 65, 100, 117, 100, 87,
		// 	77, 209, 64, 140, 231, 150, 96, 104, 137, 202, 190, 83, 202, 22, 67, 222, 38, 48, 40, 213, 202, 144,
		// 	30, 73, 184, 186, 188, 240, 209, 252, 222, 132, 36, 1, 0, 0, 0, 56, 228, 235, 51, 192, 162, 164, 174,
		// 	155, 149, 7, 230, 209, 204, 108, 163, 160, 249, 43, 214, 101, 6, 163, 211, 245, 22, 172, 179, 55, 177,
		// 	238, 237, 238, 56, 98, 159, 107, 184, 115, 156, 212, 192, 146, 164, 219, 43, 22, 11, 110, 246, 186,
		// 	131, 176, 243, 45, 2, 77, 250, 48, 26, 172, 181, 248, 14, 0, 0, 0, 0, 191, 5, 187, 38, 56, 56, 88,
		// 	171, 18, 114, 194, 104, 238, 70, 63, 202, 225, 18, 152, 199, 199, 247, 21, 34, 157, 51, 117, 141,
		// 	210, 114, 191, 173, 151, 226, 6, 149, 83, 31, 79, 28, 240, 24, 98, 89, 229, 62, 130, 90, 172, 68, 212,
		// 	217, 241, 74, 192, 238, 144, 173, 59, 89, 191, 62, 12, 0},
		//Claim node registration
		// TransactionBytes: []byte{2, 3, 0, 0, 1, 170, 100, 141, 93, 0, 0, 0, 0, 44, 0, 0, 0, 66, 67, 90,
		// 	69, 71, 79, 98, 51, 87, 78, 120, 51, 102, 68, 79, 86, 102, 57, 90, 83, 52, 69, 106, 118, 79,
		// 	73, 118, 95, 85, 101, 87, 52, 84, 86, 66, 81, 74, 95, 54, 116, 72, 75, 108, 69, 44, 0, 0, 0,
		// 	66, 67, 90, 69, 71, 79, 98, 51, 87, 78, 120, 51, 102, 68, 79, 86, 102, 57, 90, 83, 52, 69,
		// 	106, 118, 79, 73, 118, 95, 85, 101, 87, 52, 84, 86, 66, 81, 74, 95, 54, 116, 72, 75, 108, 69, 1,
		// 	0, 0, 0, 0, 0, 0, 0, 224, 0, 0, 0, 153, 58, 50, 200, 7, 61, 108, 229, 204, 48, 199, 145, 21,
		// 	99, 125, 75, 49, 45, 118, 97, 219, 80, 242, 244, 100, 134, 144, 246, 37, 144, 213, 135,
		// 	44, 0, 0, 0, 65, 45, 95, 103, 76, 82, 57, 114, 114, 81, 57, 83, 78, 56, 120, 111, 106, 83, 89,
		// 	77, 111, 104, 116, 69, 119, 54, 86, 82, 81, 108, 113, 104, 50, 87, 103, 79, 98, 108, 45, 72,
		// 	53, 51, 75, 48, 86, 90, 118, 89, 100, 56, 48, 112, 53, 83, 45, 114, 120, 83, 78, 81, 109, 77,
		// 	90, 119, 89, 88, 67, 55, 76, 121, 65, 122, 66, 109, 99, 102, 99, 106, 52, 77, 85, 85, 65, 100,
		// 	117, 100, 87, 77, 209, 64, 140, 231, 150, 96, 104, 137, 202, 190, 83, 202, 22, 67, 222, 38,
		// 	48, 40, 213, 202, 144, 30, 73, 184, 186, 188, 240, 209, 252, 222, 132, 36, 1, 0, 0, 0, 56, 228,
		// 	235, 51, 192, 162, 164, 174, 155, 149, 7, 230, 209, 204, 108, 163, 160, 249, 43, 214, 101, 6,
		// 	163, 211, 245, 22, 172, 179, 55, 177, 238, 237, 238, 56, 98, 159, 107, 184, 115, 156, 212,
		// 	192, 146, 164, 219, 43, 22, 11, 110, 246, 186, 131, 176, 243, 45, 2, 77, 250, 48, 26, 172,
		// 	181, 248, 14, 0, 0, 0, 0, 31, 108, 167, 78, 197, 37, 92, 210, 37, 93, 94, 217, 109, 178, 19,
		// 	210, 236, 58, 196, 98, 254, 86, 50, 45, 174, 91, 103, 211, 20, 252, 137, 77, 84, 161, 124,
		// 	35, 74, 61, 74, 146, 85, 120, 35, 102, 43, 106, 158, 132, 199, 59, 245, 191, 25, 92, 222,
		// 	28, 208, 97, 22, 113, 230, 250, 8, 3},
		//Remove node registration
		TransactionBytes: []byte{2, 2, 0, 0, 1, 234, 112, 141, 93, 0, 0, 0, 0, 44, 0, 0, 0, 66, 67,
			90, 69, 71, 79, 98, 51, 87, 78, 120, 51, 102, 68, 79, 86, 102, 57, 90, 83, 52, 69, 106,
			118, 79, 73, 118, 95, 85, 101, 87, 52, 84, 86, 66, 81, 74, 95, 54, 116, 72, 75, 108, 69,
			44, 0, 0, 0, 66, 67, 90, 69, 71, 79, 98, 51, 87, 78, 120, 51, 102, 68, 79, 86, 102, 57,
			90, 83, 52, 69, 106, 118, 79, 73, 118, 95, 85, 101, 87, 52, 84, 86, 66, 81, 74, 95, 54,
			116, 72, 75, 108, 69, 1, 0, 0, 0, 0, 0, 0, 0, 32, 0, 0, 0, 153, 58, 50, 200, 7, 61, 108,
			229, 204, 48, 199, 145, 21, 99, 125, 75, 49, 45, 118, 97, 219, 80, 242, 244, 100, 134,
			144, 246, 37, 144, 213, 135, 0, 0, 0, 0, 198, 233, 202, 223, 179, 244, 150, 151, 79,
			110, 147, 215, 52, 110, 180, 63, 52, 9, 206, 82, 172, 121, 167, 64, 9, 209, 95, 23, 68,
			5, 94, 110, 64, 188, 165, 254, 244, 196, 203, 245, 29, 248, 12, 97, 225, 180, 66, 130,
			187, 42, 93, 161, 96, 224, 21, 157, 27, 131, 44, 248, 142, 131, 24, 13},
		// TransactionBytes: []byte{
		// 	1, 0, 0, 0, 1, 210, 225, 121, 93, 0, 0, 0, 0, 44, 0, 0, 0, 110, 75, 95, 111, 117, 120, 100, 68,
		// 	68, 119, 117, 74, 105, 111, 103, 105, 68, 65, 105, 95, 122, 115, 49, 76, 113, 101, 78, 55, 102,
		// 	53, 90, 115, 88, 98, 70, 116, 88, 71, 113, 71, 99, 48, 80, 100, 44, 0, 0, 0, 118, 66, 75, 98,
		// 	114, 82, 53, 89, 57, 83, 71, 68, 74, 51, 50, 49, 76, 119, 53, 53, 50, 119, 53, 106, 85, 50, 76,
		// 	109, 79, 81, 67, 68, 120, 81, 114, 114, 118, 74, 48, 67, 85, 107, 101, 70, 160, 134, 1, 0, 0,
		// 	0, 0, 0, 8, 0, 0, 0, 0, 225, 245, 5, 0, 0, 0, 0, 0, 0, 0, 0, 109, 6, 82, 80, 77, 171, 32, 88,
		// 	211, 199, 11, 114, 75, 229, 243, 98, 167, 159, 225, 11, 40, 125, 221, 252, 44, 131, 136, 13,
		// 	104, 109, 228, 40, 27, 177, 175, 128, 223, 154, 19, 71, 18, 134, 177, 77, 96, 157, 187, 91,
		// 	152, 160, 78, 140, 96, 81, 116, 38, 164, 105, 149, 50, 138, 236, 209, 11},
		// add node
		// TransactionBytes: []byte{
		//	2, 0, 0, 0, 1, 77, 2, 85, 93, 0, 0, 0, 0, 44, 0, 0, 0, 66, 67, 90, 110, 83, 102, 113, 112, 80, 53, 116, 113, 70, 81, 108,
		//	77, 84, 89, 107, 68, 101, 66, 86, 70, 87, 110, 98, 121, 86, 75, 55, 118, 76, 114, 53, 79, 82, 70, 112, 84, 106, 103, 116,
		//	78, 44, 0, 0, 0, 66, 67, 90, 75, 76, 118, 103, 85, 89, 90, 49, 75, 75, 120, 45, 106, 116, 70, 57, 75, 111, 74, 115, 107,
		//	106, 86, 80, 118, 66, 57, 106, 112, 73, 106, 102, 122, 122, 73, 54, 122, 68, 87, 48, 74, 1, 0, 0, 0, 0, 0, 0, 0, 179, 0,
		//	0, 0, 0, 14, 6, 218, 170, 54, 60, 50, 2, 66, 130, 119, 226, 235, 126, 203, 5, 12, 152, 194, 170, 146, 43, 63, 224, 101,
		//	127, 241, 62, 152, 187, 255, 44, 0, 0, 0, 66, 67, 90, 110, 83, 102, 113, 112, 80, 53, 116, 113, 70, 81, 108, 77, 84, 89,
		//	107, 68, 101, 66, 86, 70, 87, 110, 98, 121, 86, 75, 55, 118, 76, 114, 53, 79, 82, 70, 112, 84, 106, 103, 116, 78, 9, 0, 0,
		//	0, 49, 50, 55, 46, 48, 46, 48, 46, 49, 160, 134, 1, 0, 0, 0, 0, 0, 72, 101, 108, 108, 111, 66, 108, 111, 99, 107, 0, 0, 0, 0,
		//	199, 197, 72, 124, 13, 17, 101, 202, 66, 255, 200, 80, 230, 26, 232, 97, 114, 251, 243, 2, 160, 39, 241, 127, 134, 183, 154,
		//	155, 151, 223, 41, 5, 43, 100, 106, 180, 105, 192, 249, 103, 238, 62, 74, 180, 114, 42, 210, 236, 201, 241, 198, 237, 233, 66, 198,
		//	203, 18, 201, 201, 61, 39, 167, 91, 10, 229, 148, 34, 207, 159, 48, 187, 20, 133, 227, 205, 56, 234, 23, 245, 89, 41, 246, 210, 194,
		//	132, 107, 152, 95, 198, 96, 238, 88, 8, 76, 24, 42, 139, 71, 249, 178, 252, 59, 30, 57, 74, 146, 163, 211, 36, 110, 221, 219, 218,
		//	57, 63, 79, 55, 216, 214, 139, 85, 125, 62, 129, 158, 16, 108, 3,
		// },

		// setup Dataset
		// TransactionBytes: []byte{
		// 	3, 0, 0, 0, 1, 92, 108, 83, 93, 0, 0, 0, 0, 44, 0, 0, 0, 66, 67, 90, 110, 83, 102, 113, 112, 80, 53, 116, 113, 70, 81, 108,
		// 	77, 84, 89, 107, 68, 101, 66, 86, 70, 87, 110, 98, 121, 86, 75, 55, 118, 76, 114, 53, 79, 82, 70, 112, 84, 106, 103, 116,
		// 	78, 44, 0, 0, 0, 66, 67, 90, 75, 76, 118, 103, 85, 89, 90, 49, 75, 75, 120, 45, 106, 116, 70, 57, 75, 111, 74, 115, 107, 106,
		// 	86, 80, 118, 66, 57, 106, 112, 73, 106, 102, 122, 122, 73, 54, 122, 68, 87, 48, 74, 1, 0, 0, 0, 0, 0, 0, 0, 131, 0, 0, 0,
		// 	44, 0, 0, 0, 66, 67, 90, 110, 83, 102, 113, 112, 80, 53, 116, 113, 70, 81, 108, 77, 84, 89, 107, 68, 101, 66, 86, 70, 87,
		// 	110, 98, 121, 86, 75, 55, 118, 76, 114, 53, 79, 82, 70, 112, 84, 106, 103, 116, 78, 44, 0, 0, 0, 66, 67, 90, 75, 76, 118, 103,
		// 	85, 89, 90, 49, 75, 75, 120, 45, 106, 116, 70, 57, 75, 111, 74, 115, 107, 106, 86, 80, 118, 66, 57, 106, 112, 73, 106, 102,
		// 	122, 122, 73, 54, 122, 68, 87, 48, 74, 5, 0, 0, 0, 65, 100, 109, 105, 110, 14, 0, 0, 0, 121, 111, 117, 114, 32, 97, 114, 101,
		// 	32, 97, 100, 109, 105, 110, 0, 141, 39, 0, 0, 0, 0, 0, 49, 195, 165, 218, 129, 183, 199, 241, 41, 12, 132, 139, 76, 252, 226,
		// 	91, 5, 96, 72, 140, 247, 72, 100, 67, 148, 188, 226, 179, 71, 94, 87, 191, 147, 220, 243, 199, 102, 104, 155, 203, 82, 23,
		// 	255, 170, 37, 39, 65, 195, 54, 30, 184, 46, 230, 222, 62, 138, 79, 69, 22, 191, 34, 9, 81, 4,
		// },
	})

	if err != nil {
		log.Fatalf("error calling rpc_service.PostTransaction: %s", err)
	}

	log.Printf("response from remote rpc_service.PostTransaction(): %s", response)

}
